# https://aka.ms/yaml

jobs:
- job: 'Travis'
  pool:
    vmImage: 'ubuntu-16.04' # other options: 'macOS-10.13', 'vs2017-win2016'
  variables:
    python.version: '3.6'
    gh.ref: github.com/jupyterlab/jupyterlab.git
  strategy:
    matrix:
      JS:
        group: 'js'
      Integrity:
        group: 'integrity'
      Python:
        group: 'python'
      CLI:
        group: 'cli'
        python.version: '3.5'
      Docs:
        group: 'docs'

  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '$(python.version)'
      architecture: 'x64'

  - task: Bash@3
    displayName: 'install'
    inputs:
      targetType: 'filePath'
      filePath: ./scripts/travis_install.sh
  - task: Bash@3
    displayName: 'script'
    inputs:
      targetType: 'filePath'
      filePath: ./scripts/travis_script.sh
  - task: PublishTestResults@2
    inputs:
      testResultsFiles: '**/test-*.xml'
      testRunTitle: 'pytest'
    condition: eq(variables['group'], 'python'))
  - task: Bash@3
    displayName: 'after_success'
    inputs:
      targetType: 'filePath'
      filePath: ./scripts/travis_after_success.sh
